{"ast":null,"code":"var _jsxFileName = \"/Users/kieferslaton/doly/client/src/components/TodoListMobile.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport DatePicker from \"react-mobile-datepicker\";\nimport { format } from \"date-fns\";\nimport $ from \"jquery\";\nimport { FaRegCircle, FaRegCheckCircle, FaPlusCircle, FaRegTrashAlt, FaChevronCircleDown, FaChevronCircleUp } from \"react-icons/fa\";\nconst url = \"\";\n\nconst CompleteButton = props => {\n  const [hover, setHover] = useState(false);\n\n  const hoverToggle = () => {\n    setHover(!hover);\n  };\n\n  const handleClick = () => {\n    props.markComplete(props.todo);\n    setHover(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FaRegCircle, {\n    size: 30,\n    onMouseEnter: () => hoverToggle(),\n    onMouseLeave: () => hoverToggle(),\n    style: {\n      color: hover ? props.user.color : \"#292b2c\",\n      cursor: hover ? \"pointer\" : \"default\"\n    },\n    className: props.todo.complete ? \"d-none\" : \"\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FaRegCheckCircle, {\n    size: 30,\n    onMouseEnter: () => hoverToggle(),\n    onMouseLeave: () => hoverToggle(),\n    style: {\n      color: hover ? props.user.color : \"#292b2c\",\n      cursor: hover ? \"pointer\" : \"default\"\n    },\n    className: props.todo.complete ? \"\" : \"d-none\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst DateButton = props => {\n  const [date, setDate] = useState(props.todo.due ? new Date(props.todo.due) : new Date());\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleClick = () => {\n    setIsOpen(true);\n  };\n\n  const handleCancel = () => {\n    setIsOpen(false);\n  };\n\n  const handleChange = e => {\n    const formattedDate = new Date(e.target.value.replace(/-/g, \"/\"));\n    console.log(formattedDate);\n    axios.post(`${url}/todos/update/${props.todo._id}`, {\n      task: props.todo.task,\n      username: props.todo.username,\n      due: formattedDate,\n      complete: props.todo.complete,\n      tags: props.todo.tags\n    }).then(res => console.log(res));\n    setDate(formattedDate);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n    style: {\n      position: 'relative',\n      left: -20\n    },\n    className: \"date-btn-mobile mx-0\",\n    value: format(date, \"yyyy-MM-dd\"),\n    type: \"date\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst ToggleButton = props => {\n  const [showTags, setShowTags] = useState(false);\n\n  const tagToggle = () => {\n    setShowTags(!showTags);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    class: \"btn\",\n    \"data-toggle\": \"collapse\",\n    \"data-target\": \"#collapse\" + props.todo._id.toString(),\n    onClick: () => tagToggle(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, showTags ? /*#__PURE__*/React.createElement(FaChevronCircleUp, {\n    style: {\n      color: \"#292b2c\"\n    },\n    size: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(FaChevronCircleDown, {\n    style: {\n      color: \"#292b2c\"\n    },\n    size: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  })));\n};\n\nconst TagToggleButton = props => {\n  const [showTags, setShowTags] = useState(false);\n\n  const tagToggle = () => {\n    setShowTags(!showTags);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    class: \"btn\",\n    \"data-toggle\": \"collapse\",\n    \"data-target\": \"#collapse\" + props.tagIndex.toString() + props.todo._id.toString(),\n    onClick: () => tagToggle(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, showTags ? /*#__PURE__*/React.createElement(FaChevronCircleUp, {\n    style: {\n      color: \"#292b2c\"\n    },\n    size: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(FaChevronCircleDown, {\n    style: {\n      color: \"#292b2c\"\n    },\n    size: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  })));\n};\n\nconst TagForm = props => {\n  const [tag, setTag] = useState(\"\");\n  const [autoTags, setAutoTags] = useState([]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let tags = props.todo.tags;\n\n    if (!tags.includes(tag)) {\n      tags.push(tag);\n    }\n\n    axios.post(`${url}/todos/update/${props.todo._id}`, {\n      task: props.todo.task,\n      username: props.todo.username,\n      due: props.todo.due,\n      complete: props.todo.complete,\n      tags: tags\n    }).then(res => console.log(res));\n    setTag(\"\");\n    $(\"#modal\" + props.index).modal(\"hide\");\n  };\n\n  const handleChange = e => {\n    e.target.value.length ? setAutoTags(props.globalTags.filter(tagName => tagName.toLowerCase().startsWith(e.target.value.toLowerCase()))) : setAutoTags([]);\n    setTag(e.target.value.toLowerCase().split(\" \").map(s => s.charAt(0).toUpperCase() + s.substring(1)).join(\" \"));\n  };\n\n  const handleClickTagAdd = divTag => {\n    let tags = props.todo.tags;\n\n    if (!tags.includes(divTag)) {\n      tags.push(divTag);\n    }\n\n    axios.post(`${url}/todos/update/${props.todo._id}`, {\n      task: props.todo.task,\n      username: props.todo.username,\n      due: props.todo.due,\n      complete: props.todo.complete,\n      tags: tags\n    }).then(res => console.log(res));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"w-100 justify-content-center px-2\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto col-4\",\n    style: {\n      fontSize: \"1em\",\n      color: props.user.color,\n      fontWeight: \"bold\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }, \"Add Tag:\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"wrapper my-auto col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"px-2\",\n    placeholder: \"Start Typing\",\n    value: tag,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"mobile-tags-dropdown px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, autoTags.map(tag => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown-tag m-1\",\n    key: tag,\n    onClick: () => handleClickTagAdd(tag),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, tag)))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    class: \"btn\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FaPlusCircle, {\n    size: 25,\n    style: {\n      color: props.user.color\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nconst TodoForm = ({\n  user\n}) => {\n  const [task, setTask] = useState(\"\");\n\n  const handleChange = e => {\n    setTask(e.target.value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axios.post(`${url}/todos/add`, {\n      task,\n      username: user.username\n    }).then(res => console.log(res));\n    setTask(\"\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid m-0 mw-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"w-100 border border-dark rounded p-2 text-center\",\n    value: task,\n    onChange: handleChange,\n    placeholder: \"New Task\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 13\n    }\n  })))));\n};\n\nconst Todo = ({\n  user,\n  todo,\n  globalTags,\n  removeTask\n}) => {\n  const markComplete = todo => {\n    axios.post(`${url}/todos/update/${todo._id}`, {\n      task: todo.task,\n      username: todo.username,\n      due: todo.due,\n      tags: todo.tags,\n      complete: !todo.complete\n    }).then(res => console.log(res));\n  };\n\n  const removeTag = (todo, tag) => {\n    axios.post(`${url}/todos/update/${todo._id}`, {\n      task: todo.task,\n      username: todo.username,\n      due: todo.due,\n      complete: todo.complete,\n      tags: todo.tags.filter(item => item !== tag)\n    }).then(res => console.log(res));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-center p-2 todo-mobile\",\n    key: todo._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2 text-center my-auto mx-0 px-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CompleteButton, {\n    user: user,\n    todo: todo,\n    markComplete: markComplete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: `${todo.complete ? \"complete\" : \"\"} col-7 my-auto`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 9\n    }\n  }, todo.task), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ToggleButton, {\n    user: user,\n    todo: todo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 collapse container-fluid px-1 my-3 pb-3 todo-drop-mobile\",\n    id: \"collapse\" + todo._id.toString(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mx-2 my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 9\n    }\n  }, todo.tags.map(tag => /*#__PURE__*/React.createElement(\"div\", {\n    key: tag,\n    className: \"tag p-2 m-1\",\n    style: {\n      color: user.color,\n      border: `1px solid ${user.color}`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 13\n    }\n  }, `${tag}  `, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pointer rotate\",\n    onClick: () => removeTag(todo, tag),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 15\n    }\n  }, \"+\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mx-2 my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TagForm, {\n    todo: todo,\n    user: user,\n    globalTags: globalTags,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mx-2 my-2 p-2 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 pl-0 text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto\",\n    style: {\n      fontWeight: \"bold\",\n      color: user.color\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 13\n    }\n  }, \"Due Date:\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 border pl-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DateButton, {\n    user: user,\n    todo: todo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mx-2 my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      color: \"white\",\n      backgroundColor: user.color,\n      borderRadius: 10\n    },\n    class: \"btn\",\n    onClick: () => removeTask(todo._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 11\n    }\n  }, \"Delete Task \", /*#__PURE__*/React.createElement(FaRegTrashAlt, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 25\n    }\n  })))));\n};\n\nconst TodoList = props => {\n  const [todos, setTodos] = useState([]);\n  const [globalTags, setGlobalTags] = useState();\n  const [tagLists, setTagLists] = useState([]);\n\n  const refreshTodos = () => {\n    axios.get(`${url}/todos/`).then(res => {\n      setTodos(res.data.filter(todo => todo.username === props.user.username));\n    });\n  };\n\n  const refreshGlobalTags = () => {\n    let tempTags = [];\n\n    for (let i = 0; i < todos.length; i++) {\n      for (let j = 0; j < todos[i].tags.length; j++) {\n        if (!tempTags.includes(todos[i].tags[j])) {\n          tempTags.push(todos[i].tags[j]);\n        }\n      }\n    }\n\n    setGlobalTags(tempTags);\n  };\n\n  const refreshTagLists = () => {\n    if (todos.length && globalTags.length) {\n      let tagArray = [];\n\n      for (let i = 0; i < globalTags.length; i++) {\n        let tagObject = {\n          name: globalTags[i],\n          list: []\n        };\n        let tagList = [];\n\n        for (let j = 0; j < todos.length; j++) {\n          if (todos[j].tags.includes(globalTags[i])) {\n            tagList.push(todos[j]);\n          }\n        }\n\n        tagObject.list = tagList;\n        tagArray.push(tagObject);\n      }\n\n      setTagLists(tagArray);\n    }\n  };\n\n  useEffect(() => {\n    refreshGlobalTags();\n  }, [todos]);\n  useEffect(() => {\n    refreshTodos();\n  }, [todos]);\n  useEffect(() => {\n    refreshTagLists();\n  }, [todos]);\n\n  const removeTask = id => {\n    axios.delete(`${url}/todos/${id}`).then(res => console.log(res));\n    $(\".collapse\").collapse(\"hide\");\n  };\n\n  if (props.isInbox) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TodoForm, {\n      user: props.user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid mt-3 px-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }\n    }, todos.map(todo => /*#__PURE__*/React.createElement(Todo, {\n      todo: todo,\n      user: props.user,\n      removeTask: removeTask,\n      globalTags: globalTags,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 13\n      }\n    }))));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mt-1 px-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 7\n      }\n    }, tagLists.map((tag, index) => {\n      let tagIndex = index;\n\n      for (let i = 0; i < tag.list.length; i++) {\n        tag.list[i].tagIndex = tagIndex;\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container my-5 px-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        style: {\n          color: props.user.color\n        },\n        className: \"mx-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 15\n        }\n      }, tag.name), /*#__PURE__*/React.createElement(React.Fragment, null, tag.list.map(todo => /*#__PURE__*/React.createElement(Todo, {\n        todo: todo,\n        user: props.user,\n        removeTask: removeTask,\n        globalTags: globalTags,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 19\n        }\n      }))));\n    }));\n  }\n};\n\nexport default TodoList;","map":{"version":3,"sources":["/Users/kieferslaton/doly/client/src/components/TodoListMobile.js"],"names":["React","useState","useEffect","axios","DatePicker","format","$","FaRegCircle","FaRegCheckCircle","FaPlusCircle","FaRegTrashAlt","FaChevronCircleDown","FaChevronCircleUp","url","CompleteButton","props","hover","setHover","hoverToggle","handleClick","markComplete","todo","color","user","cursor","complete","DateButton","date","setDate","due","Date","isOpen","setIsOpen","handleCancel","handleChange","e","formattedDate","target","value","replace","console","log","post","_id","task","username","tags","then","res","position","left","ToggleButton","showTags","setShowTags","tagToggle","toString","TagToggleButton","tagIndex","TagForm","tag","setTag","autoTags","setAutoTags","handleSubmit","preventDefault","includes","push","index","modal","length","globalTags","filter","tagName","toLowerCase","startsWith","split","map","s","charAt","toUpperCase","substring","join","handleClickTagAdd","divTag","fontSize","fontWeight","TodoForm","setTask","Todo","removeTask","removeTag","item","border","backgroundColor","borderRadius","TodoList","todos","setTodos","setGlobalTags","tagLists","setTagLists","refreshTodos","get","data","refreshGlobalTags","tempTags","i","j","refreshTagLists","tagArray","tagObject","name","list","tagList","id","delete","collapse","isInbox"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SACEC,WADF,EAEEC,gBAFF,EAGEC,YAHF,EAIEC,aAJF,EAKEC,mBALF,EAMEC,iBANF,QAOO,gBAPP;AASA,MAAMC,GAAG,GAAG,EAAZ;;AAEA,MAAMC,cAAc,GAAIC,KAAD,IAAW;AAChC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBhB,QAAQ,CAAC,KAAD,CAAlC;;AAEA,QAAMiB,WAAW,GAAG,MAAM;AACxBD,IAAAA,QAAQ,CAAC,CAACD,KAAF,CAAR;AACD,GAFD;;AAIA,QAAMG,WAAW,GAAG,MAAM;AACxBJ,IAAAA,KAAK,CAACK,YAAN,CAAmBL,KAAK,CAACM,IAAzB;AACAJ,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACD,GAHD;;AAKA,sBACE,uDACE,oBAAC,WAAD;AACE,IAAA,IAAI,EAAE,EADR;AAEE,IAAA,YAAY,EAAE,MAAMC,WAAW,EAFjC;AAGE,IAAA,YAAY,EAAE,MAAMA,WAAW,EAHjC;AAIE,IAAA,KAAK,EAAE;AACLI,MAAAA,KAAK,EAAEN,KAAK,GAAGD,KAAK,CAACQ,IAAN,CAAWD,KAAd,GAAsB,SAD7B;AAELE,MAAAA,MAAM,EAAER,KAAK,GAAG,SAAH,GAAe;AAFvB,KAJT;AAQE,IAAA,SAAS,EAAED,KAAK,CAACM,IAAN,CAAWI,QAAX,GAAsB,QAAtB,GAAiC,EAR9C;AASE,IAAA,OAAO,EAAEN,WATX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAYE,oBAAC,gBAAD;AACE,IAAA,IAAI,EAAE,EADR;AAEE,IAAA,YAAY,EAAE,MAAMD,WAAW,EAFjC;AAGE,IAAA,YAAY,EAAE,MAAMA,WAAW,EAHjC;AAIE,IAAA,KAAK,EAAE;AACLI,MAAAA,KAAK,EAAEN,KAAK,GAAGD,KAAK,CAACQ,IAAN,CAAWD,KAAd,GAAsB,SAD7B;AAELE,MAAAA,MAAM,EAAER,KAAK,GAAG,SAAH,GAAe;AAFvB,KAJT;AAQE,IAAA,SAAS,EAAED,KAAK,CAACM,IAAN,CAAWI,QAAX,GAAsB,EAAtB,GAA2B,QARxC;AASE,IAAA,OAAO,EAAEN,WATX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZF,CADF;AA0BD,CAtCD;;AAwCA,MAAMO,UAAU,GAAIX,KAAD,IAAW;AAC5B,QAAM,CAACY,IAAD,EAAOC,OAAP,IAAkB3B,QAAQ,CAC9Bc,KAAK,CAACM,IAAN,CAAWQ,GAAX,GAAiB,IAAIC,IAAJ,CAASf,KAAK,CAACM,IAAN,CAAWQ,GAApB,CAAjB,GAA4C,IAAIC,IAAJ,EADd,CAAhC;AAGA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsB/B,QAAQ,CAAC,KAAD,CAApC;;AAEA,QAAMkB,WAAW,GAAG,MAAM;AACxBa,IAAAA,SAAS,CAAC,IAAD,CAAT;AACD,GAFD;;AAIA,QAAMC,YAAY,GAAG,MAAM;AACzBD,IAAAA,SAAS,CAAC,KAAD,CAAT;AACD,GAFD;;AAIA,QAAME,YAAY,GAAIC,CAAD,IAAO;AAC1B,UAAMC,aAAa,GAAG,IAAIN,IAAJ,CAASK,CAAC,CAACE,MAAF,CAASC,KAAT,CAAeC,OAAf,CAAuB,IAAvB,EAA6B,GAA7B,CAAT,CAAtB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYL,aAAZ;AACAjC,IAAAA,KAAK,CACFuC,IADH,CACS,GAAE7B,GAAI,iBAAgBE,KAAK,CAACM,IAAN,CAAWsB,GAAI,EAD9C,EACiD;AAC7CC,MAAAA,IAAI,EAAE7B,KAAK,CAACM,IAAN,CAAWuB,IAD4B;AAE7CC,MAAAA,QAAQ,EAAE9B,KAAK,CAACM,IAAN,CAAWwB,QAFwB;AAG7ChB,MAAAA,GAAG,EAAEO,aAHwC;AAI7CX,MAAAA,QAAQ,EAAEV,KAAK,CAACM,IAAN,CAAWI,QAJwB;AAK7CqB,MAAAA,IAAI,EAAE/B,KAAK,CAACM,IAAN,CAAWyB;AAL4B,KADjD,EAQGC,IARH,CAQSC,GAAD,IAASR,OAAO,CAACC,GAAR,CAAYO,GAAZ,CARjB;AASApB,IAAAA,OAAO,CAACQ,aAAD,CAAP;AACD,GAbD;;AAeA,sBACE,uDACE;AACE,IAAA,KAAK,EAAE;AACLa,MAAAA,QAAQ,EAAE,UADL;AAELC,MAAAA,IAAI,EAAE,CAAC;AAFF,KADT;AAKE,IAAA,SAAS,EAAC,sBALZ;AAME,IAAA,KAAK,EAAE7C,MAAM,CAACsB,IAAD,EAAO,YAAP,CANf;AAOE,IAAA,IAAI,EAAC,MAPP;AAQE,IAAA,QAAQ,EAAEO,YARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAcD,CA3CD;;AA6CA,MAAMiB,YAAY,GAAIpC,KAAD,IAAW;AAC9B,QAAM,CAACqC,QAAD,EAAWC,WAAX,IAA0BpD,QAAQ,CAAC,KAAD,CAAxC;;AAEA,QAAMqD,SAAS,GAAG,MAAM;AACtBD,IAAAA,WAAW,CAAC,CAACD,QAAF,CAAX;AACD,GAFD;;AAIA,sBACE,uDACE;AACE,IAAA,KAAK,EAAC,KADR;AAEE,mBAAY,UAFd;AAGE,mBAAa,cAAcrC,KAAK,CAACM,IAAN,CAAWsB,GAAX,CAAeY,QAAf,EAH7B;AAIE,IAAA,OAAO,EAAE,MAAMD,SAAS,EAJ1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMGF,QAAQ,gBACP,oBAAC,iBAAD;AAAmB,IAAA,KAAK,EAAE;AAAE9B,MAAAA,KAAK,EAAE;AAAT,KAA1B;AAAgD,IAAA,IAAI,EAAE,EAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADO,gBAGP,oBAAC,mBAAD;AAAqB,IAAA,KAAK,EAAE;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAA5B;AAAkD,IAAA,IAAI,EAAE,EAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATJ,CADF,CADF;AAgBD,CAvBD;;AAyBA,MAAMkC,eAAe,GAAIzC,KAAD,IAAW;AACjC,QAAM,CAACqC,QAAD,EAAWC,WAAX,IAA0BpD,QAAQ,CAAC,KAAD,CAAxC;;AAEA,QAAMqD,SAAS,GAAG,MAAM;AACtBD,IAAAA,WAAW,CAAC,CAACD,QAAF,CAAX;AACD,GAFD;;AAIA,sBACE,uDACE;AACE,IAAA,KAAK,EAAC,KADR;AAEE,mBAAY,UAFd;AAGE,mBACE,cAAcrC,KAAK,CAAC0C,QAAN,CAAeF,QAAf,EAAd,GAA0CxC,KAAK,CAACM,IAAN,CAAWsB,GAAX,CAAeY,QAAf,EAJ9C;AAME,IAAA,OAAO,EAAE,MAAMD,SAAS,EAN1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQGF,QAAQ,gBACP,oBAAC,iBAAD;AAAmB,IAAA,KAAK,EAAE;AAAE9B,MAAAA,KAAK,EAAE;AAAT,KAA1B;AAAgD,IAAA,IAAI,EAAE,EAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADO,gBAGP,oBAAC,mBAAD;AAAqB,IAAA,KAAK,EAAE;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAA5B;AAAkD,IAAA,IAAI,EAAE,EAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,CADF,CADF;AAkBD,CAzBD;;AA2BA,MAAMoC,OAAO,GAAI3C,KAAD,IAAW;AACzB,QAAM,CAAC4C,GAAD,EAAMC,MAAN,IAAgB3D,QAAQ,CAAC,EAAD,CAA9B;AACA,QAAM,CAAC4D,QAAD,EAAWC,WAAX,IAA0B7D,QAAQ,CAAC,EAAD,CAAxC;;AAEA,QAAM8D,YAAY,GAAI5B,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAAC6B,cAAF;AACA,QAAIlB,IAAI,GAAG/B,KAAK,CAACM,IAAN,CAAWyB,IAAtB;;AACA,QAAI,CAACA,IAAI,CAACmB,QAAL,CAAcN,GAAd,CAAL,EAAyB;AACvBb,MAAAA,IAAI,CAACoB,IAAL,CAAUP,GAAV;AACD;;AACDxD,IAAAA,KAAK,CACFuC,IADH,CACS,GAAE7B,GAAI,iBAAgBE,KAAK,CAACM,IAAN,CAAWsB,GAAI,EAD9C,EACiD;AAC7CC,MAAAA,IAAI,EAAE7B,KAAK,CAACM,IAAN,CAAWuB,IAD4B;AAE7CC,MAAAA,QAAQ,EAAE9B,KAAK,CAACM,IAAN,CAAWwB,QAFwB;AAG7ChB,MAAAA,GAAG,EAAEd,KAAK,CAACM,IAAN,CAAWQ,GAH6B;AAI7CJ,MAAAA,QAAQ,EAAEV,KAAK,CAACM,IAAN,CAAWI,QAJwB;AAK7CqB,MAAAA,IAAI,EAAEA;AALuC,KADjD,EAQGC,IARH,CAQSC,GAAD,IAASR,OAAO,CAACC,GAAR,CAAYO,GAAZ,CARjB;AASAY,IAAAA,MAAM,CAAC,EAAD,CAAN;AACAtD,IAAAA,CAAC,CAAC,WAAWS,KAAK,CAACoD,KAAlB,CAAD,CAA0BC,KAA1B,CAAgC,MAAhC;AACD,GAjBD;;AAmBA,QAAMlC,YAAY,GAAIC,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe+B,MAAf,GACIP,WAAW,CACT/C,KAAK,CAACuD,UAAN,CAAiBC,MAAjB,CAAyBC,OAAD,IACtBA,OAAO,CAACC,WAAR,GAAsBC,UAAtB,CAAiCvC,CAAC,CAACE,MAAF,CAASC,KAAT,CAAemC,WAAf,EAAjC,CADF,CADS,CADf,GAMIX,WAAW,CAAC,EAAD,CANf;AAOAF,IAAAA,MAAM,CACJzB,CAAC,CAACE,MAAF,CAASC,KAAT,CACGmC,WADH,GAEGE,KAFH,CAES,GAFT,EAGGC,GAHH,CAGQC,CAAD,IAAOA,CAAC,CAACC,MAAF,CAAS,CAAT,EAAYC,WAAZ,KAA4BF,CAAC,CAACG,SAAF,CAAY,CAAZ,CAH1C,EAIGC,IAJH,CAIQ,GAJR,CADI,CAAN;AAOD,GAfD;;AAiBA,QAAMC,iBAAiB,GAAIC,MAAD,IAAY;AACpC,QAAIrC,IAAI,GAAG/B,KAAK,CAACM,IAAN,CAAWyB,IAAtB;;AACA,QAAI,CAACA,IAAI,CAACmB,QAAL,CAAckB,MAAd,CAAL,EAA4B;AAC1BrC,MAAAA,IAAI,CAACoB,IAAL,CAAUiB,MAAV;AACD;;AACDhF,IAAAA,KAAK,CACFuC,IADH,CACS,GAAE7B,GAAI,iBAAgBE,KAAK,CAACM,IAAN,CAAWsB,GAAI,EAD9C,EACiD;AAC7CC,MAAAA,IAAI,EAAE7B,KAAK,CAACM,IAAN,CAAWuB,IAD4B;AAE7CC,MAAAA,QAAQ,EAAE9B,KAAK,CAACM,IAAN,CAAWwB,QAFwB;AAG7ChB,MAAAA,GAAG,EAAEd,KAAK,CAACM,IAAN,CAAWQ,GAH6B;AAI7CJ,MAAAA,QAAQ,EAAEV,KAAK,CAACM,IAAN,CAAWI,QAJwB;AAK7CqB,MAAAA,IAAI,EAAEA;AALuC,KADjD,EAQGC,IARH,CAQSC,GAAD,IAASR,OAAO,CAACC,GAAR,CAAYO,GAAZ,CARjB;AASD,GAdD;;AAgBA,sBACE,uDACE;AACE,IAAA,SAAS,EAAC,mCADZ;AAEE,IAAA,QAAQ,EAAEe,YAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,eADZ;AAEE,IAAA,KAAK,EAAE;AACLqB,MAAAA,QAAQ,EAAE,KADL;AAEL9D,MAAAA,KAAK,EAAEP,KAAK,CAACQ,IAAN,CAAWD,KAFb;AAGL+D,MAAAA,UAAU,EAAE;AAHP,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAWE;AAAK,IAAA,KAAK,EAAC,uBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,KAAK,EAAC,MADR;AAEE,IAAA,WAAW,EAAC,cAFd;AAGE,IAAA,KAAK,EAAE1B,GAHT;AAIE,IAAA,QAAQ,EAAEzB,YAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAOE;AAAK,IAAA,KAAK,EAAC,2BAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG2B,QAAQ,CAACe,GAAT,CAAcjB,GAAD,iBACZ;AACE,IAAA,SAAS,EAAC,kBADZ;AAEE,IAAA,GAAG,EAAEA,GAFP;AAGE,IAAA,OAAO,EAAE,MAAMuB,iBAAiB,CAACvB,GAAD,CAHlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKGA,GALH,CADD,CADH,CAPF,CAXF,eA8BE;AAAK,IAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,KAAK,EAAC,KAAd;AAAoB,IAAA,IAAI,EAAC,QAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,IAAI,EAAE,EAApB;AAAwB,IAAA,KAAK,EAAE;AAAErC,MAAAA,KAAK,EAAEP,KAAK,CAACQ,IAAN,CAAWD;AAApB,KAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CA9BF,CAJF,CADF,CADF;AA6CD,CArGD;;AAuGA,MAAMgE,QAAQ,GAAG,CAAC;AAAE/D,EAAAA;AAAF,CAAD,KAAc;AAC7B,QAAM,CAACqB,IAAD,EAAO2C,OAAP,IAAkBtF,QAAQ,CAAC,EAAD,CAAhC;;AAEA,QAAMiC,YAAY,GAAIC,CAAD,IAAO;AAC1BoD,IAAAA,OAAO,CAACpD,CAAC,CAACE,MAAF,CAASC,KAAV,CAAP;AACD,GAFD;;AAIA,QAAMyB,YAAY,GAAI5B,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAAC6B,cAAF;AACA7D,IAAAA,KAAK,CACFuC,IADH,CACS,GAAE7B,GAAI,YADf,EAC4B;AACxB+B,MAAAA,IADwB;AAExBC,MAAAA,QAAQ,EAAEtB,IAAI,CAACsB;AAFS,KAD5B,EAKGE,IALH,CAKSC,GAAD,IAASR,OAAO,CAACC,GAAR,CAAYO,GAAZ,CALjB;AAMAuC,IAAAA,OAAO,CAAC,EAAD,CAAP;AACD,GATD;;AAWA,sBACE;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,QAAQ,EAAExB,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,kDADZ;AAEE,IAAA,KAAK,EAAEnB,IAFT;AAGE,IAAA,QAAQ,EAAEV,YAHZ;AAIE,IAAA,WAAW,EAAC,UAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,CADF,CADF;AAgBD,CAlCD;;AAoCA,MAAMsD,IAAI,GAAG,CAAC;AAAEjE,EAAAA,IAAF;AAAQF,EAAAA,IAAR;AAAciD,EAAAA,UAAd;AAA0BmB,EAAAA;AAA1B,CAAD,KAA4C;AACvD,QAAMrE,YAAY,GAAIC,IAAD,IAAU;AAC7BlB,IAAAA,KAAK,CACFuC,IADH,CACS,GAAE7B,GAAI,iBAAgBQ,IAAI,CAACsB,GAAI,EADxC,EAC2C;AACvCC,MAAAA,IAAI,EAAEvB,IAAI,CAACuB,IAD4B;AAEvCC,MAAAA,QAAQ,EAAExB,IAAI,CAACwB,QAFwB;AAGvChB,MAAAA,GAAG,EAAER,IAAI,CAACQ,GAH6B;AAIvCiB,MAAAA,IAAI,EAAEzB,IAAI,CAACyB,IAJ4B;AAKvCrB,MAAAA,QAAQ,EAAE,CAACJ,IAAI,CAACI;AALuB,KAD3C,EAQGsB,IARH,CAQSC,GAAD,IAASR,OAAO,CAACC,GAAR,CAAYO,GAAZ,CARjB;AASD,GAVD;;AAYA,QAAM0C,SAAS,GAAG,CAACrE,IAAD,EAAOsC,GAAP,KAAe;AAC/BxD,IAAAA,KAAK,CACFuC,IADH,CACS,GAAE7B,GAAI,iBAAgBQ,IAAI,CAACsB,GAAI,EADxC,EAC2C;AACvCC,MAAAA,IAAI,EAAEvB,IAAI,CAACuB,IAD4B;AAEvCC,MAAAA,QAAQ,EAAExB,IAAI,CAACwB,QAFwB;AAGvChB,MAAAA,GAAG,EAAER,IAAI,CAACQ,GAH6B;AAIvCJ,MAAAA,QAAQ,EAAEJ,IAAI,CAACI,QAJwB;AAKvCqB,MAAAA,IAAI,EAAEzB,IAAI,CAACyB,IAAL,CAAUyB,MAAV,CAAkBoB,IAAD,IAAUA,IAAI,KAAKhC,GAApC;AALiC,KAD3C,EAQGZ,IARH,CAQSC,GAAD,IAASR,OAAO,CAACC,GAAR,CAAYO,GAAZ,CARjB;AASD,GAVD;;AAYA,sBACE,uDACE;AACE,IAAA,SAAS,EAAC,4CADZ;AAEE,IAAA,GAAG,EAAE3B,IAAI,CAACsB,GAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE;AAAK,IAAA,SAAS,EAAC,qCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAEpB,IAAtB;AAA4B,IAAA,IAAI,EAAEF,IAAlC;AAAwC,IAAA,YAAY,EAAED,YAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,eAOE;AAAK,IAAA,SAAS,EAAG,GAAEC,IAAI,CAACI,QAAL,GAAgB,UAAhB,GAA6B,EAAG,gBAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,IAAI,CAACuB,IADR,CAPF,eAUE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,IAAI,EAAErB,IAApB;AAA0B,IAAA,IAAI,EAAEF,IAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAVF,CADF,eAeE;AAAK,IAAA,SAAS,EAAC,gEAAf;AAAgF,IAAA,EAAE,EAAE,aAAaA,IAAI,CAACsB,GAAL,CAASY,QAAT,EAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlC,IAAI,CAACyB,IAAL,CAAU8B,GAAV,CAAejB,GAAD,iBACb;AACE,IAAA,GAAG,EAAEA,GADP;AAEE,IAAA,SAAS,EAAC,aAFZ;AAGE,IAAA,KAAK,EAAE;AACLrC,MAAAA,KAAK,EAAEC,IAAI,CAACD,KADP;AAELsE,MAAAA,MAAM,EAAG,aAAYrE,IAAI,CAACD,KAAM;AAF3B,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQI,GAAEqC,GAAI,IARV,eASE;AACE,IAAA,SAAS,EAAC,gBADZ;AAEE,IAAA,OAAO,EAAE,MAAM+B,SAAS,CAACrE,IAAD,EAAOsC,GAAP,CAF1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SATF,CADD,CADH,CADF,eAqBE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AACE,IAAA,IAAI,EAAEtC,IADR;AAEE,IAAA,IAAI,EAAEE,IAFR;AAGE,IAAA,UAAU,EAAE+C,UAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CArBF,eA4BE;AACE,IAAA,SAAS,EAAC,0BADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGE;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,SADZ;AAEE,IAAA,KAAK,EAAE;AAAEe,MAAAA,UAAU,EAAE,MAAd;AAAsB/D,MAAAA,KAAK,EAAEC,IAAI,CAACD;AAAlC,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CAHF,eAWE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAEC,IAAlB;AAAwB,IAAA,IAAI,EAAEF,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAXF,CA5BF,eA2CE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE,OADF;AAELuE,MAAAA,eAAe,EAAEtE,IAAI,CAACD,KAFjB;AAGLwE,MAAAA,YAAY,EAAE;AAHT,KADT;AAME,IAAA,KAAK,EAAC,KANR;AAOE,IAAA,OAAO,EAAE,MAAML,UAAU,CAACpE,IAAI,CAACsB,GAAN,CAP3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCASc,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATd,CADF,CA3CF,CAfF,CADF;AA2ED,CApGD;;AAsGA,MAAMoD,QAAQ,GAAIhF,KAAD,IAAW;AAC1B,QAAM,CAACiF,KAAD,EAAQC,QAAR,IAAoBhG,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACqE,UAAD,EAAa4B,aAAb,IAA8BjG,QAAQ,EAA5C;AACA,QAAM,CAACkG,QAAD,EAAWC,WAAX,IAA0BnG,QAAQ,CAAC,EAAD,CAAxC;;AAEA,QAAMoG,YAAY,GAAG,MAAM;AACzBlG,IAAAA,KAAK,CAACmG,GAAN,CAAW,GAAEzF,GAAI,SAAjB,EAA2BkC,IAA3B,CAAiCC,GAAD,IAAS;AACvCiD,MAAAA,QAAQ,CACNjD,GAAG,CAACuD,IAAJ,CAAShC,MAAT,CAAiBlD,IAAD,IAAUA,IAAI,CAACwB,QAAL,KAAkB9B,KAAK,CAACQ,IAAN,CAAWsB,QAAvD,CADM,CAAR;AAGD,KAJD;AAKD,GAND;;AAQA,QAAM2D,iBAAiB,GAAG,MAAM;AAC9B,QAAIC,QAAQ,GAAG,EAAf;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,KAAK,CAAC3B,MAA1B,EAAkCqC,CAAC,EAAnC,EAAuC;AACrC,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,KAAK,CAACU,CAAD,CAAL,CAAS5D,IAAT,CAAcuB,MAAlC,EAA0CsC,CAAC,EAA3C,EAA+C;AAC7C,YAAI,CAACF,QAAQ,CAACxC,QAAT,CAAkB+B,KAAK,CAACU,CAAD,CAAL,CAAS5D,IAAT,CAAc6D,CAAd,CAAlB,CAAL,EAA0C;AACxCF,UAAAA,QAAQ,CAACvC,IAAT,CAAc8B,KAAK,CAACU,CAAD,CAAL,CAAS5D,IAAT,CAAc6D,CAAd,CAAd;AACD;AACF;AACF;;AACDT,IAAAA,aAAa,CAACO,QAAD,CAAb;AACD,GAVD;;AAYA,QAAMG,eAAe,GAAG,MAAM;AAC5B,QAAIZ,KAAK,CAAC3B,MAAN,IAAgBC,UAAU,CAACD,MAA/B,EAAuC;AACrC,UAAIwC,QAAQ,GAAG,EAAf;;AACA,WAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpC,UAAU,CAACD,MAA/B,EAAuCqC,CAAC,EAAxC,EAA4C;AAC1C,YAAII,SAAS,GAAG;AACdC,UAAAA,IAAI,EAAEzC,UAAU,CAACoC,CAAD,CADF;AAEdM,UAAAA,IAAI,EAAE;AAFQ,SAAhB;AAIA,YAAIC,OAAO,GAAG,EAAd;;AACA,aAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,KAAK,CAAC3B,MAA1B,EAAkCsC,CAAC,EAAnC,EAAuC;AACrC,cAAIX,KAAK,CAACW,CAAD,CAAL,CAAS7D,IAAT,CAAcmB,QAAd,CAAuBK,UAAU,CAACoC,CAAD,CAAjC,CAAJ,EAA2C;AACzCO,YAAAA,OAAO,CAAC/C,IAAR,CAAa8B,KAAK,CAACW,CAAD,CAAlB;AACD;AACF;;AACDG,QAAAA,SAAS,CAACE,IAAV,GAAiBC,OAAjB;AACAJ,QAAAA,QAAQ,CAAC3C,IAAT,CAAc4C,SAAd;AACD;;AACDV,MAAAA,WAAW,CAACS,QAAD,CAAX;AACD;AACF,GAnBD;;AAqBA3G,EAAAA,SAAS,CAAC,MAAM;AACdsG,IAAAA,iBAAiB;AAClB,GAFQ,EAEN,CAACR,KAAD,CAFM,CAAT;AAIA9F,EAAAA,SAAS,CAAC,MAAM;AACdmG,IAAAA,YAAY;AACb,GAFQ,EAEN,CAACL,KAAD,CAFM,CAAT;AAIA9F,EAAAA,SAAS,CAAC,MAAM;AACd0G,IAAAA,eAAe;AAChB,GAFQ,EAEN,CAACZ,KAAD,CAFM,CAAT;;AAIA,QAAMP,UAAU,GAAIyB,EAAD,IAAQ;AACzB/G,IAAAA,KAAK,CAACgH,MAAN,CAAc,GAAEtG,GAAI,UAASqG,EAAG,EAAhC,EAAmCnE,IAAnC,CAAyCC,GAAD,IAASR,OAAO,CAACC,GAAR,CAAYO,GAAZ,CAAjD;AACA1C,IAAAA,CAAC,CAAC,WAAD,CAAD,CAAe8G,QAAf,CAAwB,MAAxB;AACD,GAHD;;AAKA,MAAIrG,KAAK,CAACsG,OAAV,EAAmB;AACjB,wBACE,uDACE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAEtG,KAAK,CAACQ,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAK,MAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGyE,KAAK,CAACpB,GAAN,CAAWvD,IAAD,iBACT,oBAAC,IAAD;AACE,MAAA,IAAI,EAAEA,IADR;AAEE,MAAA,IAAI,EAAEN,KAAK,CAACQ,IAFd;AAGE,MAAA,UAAU,EAAEkE,UAHd;AAIE,MAAA,UAAU,EAAEnB,UAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADH,CAFF,CADF;AAeD,GAhBD,MAgBO;AACL,wBACE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG6B,QAAQ,CAACvB,GAAT,CAAa,CAACjB,GAAD,EAAMQ,KAAN,KAAgB;AAC5B,UAAIV,QAAQ,GAAGU,KAAf;;AACA,WAAK,IAAIuC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/C,GAAG,CAACqD,IAAJ,CAAS3C,MAA7B,EAAqCqC,CAAC,EAAtC,EAA0C;AACxC/C,QAAAA,GAAG,CAACqD,IAAJ,CAASN,CAAT,EAAYjD,QAAZ,GAAuBA,QAAvB;AACD;;AAED,0BACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,KAAK,EAAE;AAAEnC,UAAAA,KAAK,EAAEP,KAAK,CAACQ,IAAN,CAAWD;AAApB,SAAX;AAAwC,QAAA,SAAS,EAAC,MAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA0DqC,GAAG,CAACoD,IAA9D,CADF,eAEE,0CACGpD,GAAG,CAACqD,IAAJ,CAASpC,GAAT,CAAcvD,IAAD,iBACZ,oBAAC,IAAD;AACA,QAAA,IAAI,EAAEA,IADN;AAEA,QAAA,IAAI,EAAEN,KAAK,CAACQ,IAFZ;AAGA,QAAA,UAAU,EAAEkE,UAHZ;AAIA,QAAA,UAAU,EAAEnB,UAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,CADH,CAFF,CADF;AAeD,KArBA,CADH,CADF;AA0BD;AACF,CA3GD;;AA6GA,eAAeyB,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport DatePicker from \"react-mobile-datepicker\";\nimport { format } from \"date-fns\";\nimport $ from \"jquery\";\nimport {\n  FaRegCircle,\n  FaRegCheckCircle,\n  FaPlusCircle,\n  FaRegTrashAlt,\n  FaChevronCircleDown,\n  FaChevronCircleUp,\n} from \"react-icons/fa\";\n\nconst url = \"\";\n\nconst CompleteButton = (props) => {\n  const [hover, setHover] = useState(false);\n\n  const hoverToggle = () => {\n    setHover(!hover);\n  };\n\n  const handleClick = () => {\n    props.markComplete(props.todo);\n    setHover(false);\n  };\n\n  return (\n    <>\n      <FaRegCircle\n        size={30}\n        onMouseEnter={() => hoverToggle()}\n        onMouseLeave={() => hoverToggle()}\n        style={{\n          color: hover ? props.user.color : \"#292b2c\",\n          cursor: hover ? \"pointer\" : \"default\",\n        }}\n        className={props.todo.complete ? \"d-none\" : \"\"}\n        onClick={handleClick}\n      />\n      <FaRegCheckCircle\n        size={30}\n        onMouseEnter={() => hoverToggle()}\n        onMouseLeave={() => hoverToggle()}\n        style={{\n          color: hover ? props.user.color : \"#292b2c\",\n          cursor: hover ? \"pointer\" : \"default\",\n        }}\n        className={props.todo.complete ? \"\" : \"d-none\"}\n        onClick={handleClick}\n      />\n    </>\n  );\n};\n\nconst DateButton = (props) => {\n  const [date, setDate] = useState(\n    props.todo.due ? new Date(props.todo.due) : new Date()\n  );\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleClick = () => {\n    setIsOpen(true);\n  };\n\n  const handleCancel = () => {\n    setIsOpen(false);\n  };\n\n  const handleChange = (e) => {\n    const formattedDate = new Date(e.target.value.replace(/-/g, \"/\"));\n    console.log(formattedDate);\n    axios\n      .post(`${url}/todos/update/${props.todo._id}`, {\n        task: props.todo.task,\n        username: props.todo.username,\n        due: formattedDate,\n        complete: props.todo.complete,\n        tags: props.todo.tags,\n      })\n      .then((res) => console.log(res));\n    setDate(formattedDate);\n  };\n\n  return (\n    <>\n      <input\n        style={{\n          position: 'relative',\n          left: -20\n        }}\n        className=\"date-btn-mobile mx-0\"\n        value={format(date, \"yyyy-MM-dd\")}\n        type=\"date\"\n        onChange={handleChange}\n      />\n    </>\n  );\n};\n\nconst ToggleButton = (props) => {\n  const [showTags, setShowTags] = useState(false);\n\n  const tagToggle = () => {\n    setShowTags(!showTags);\n  };\n\n  return (\n    <>\n      <button\n        class=\"btn\"\n        data-toggle=\"collapse\"\n        data-target={\"#collapse\" + props.todo._id.toString()}\n        onClick={() => tagToggle()}\n      >\n        {showTags ? (\n          <FaChevronCircleUp style={{ color: \"#292b2c\" }} size={30} />\n        ) : (\n          <FaChevronCircleDown style={{ color: \"#292b2c\" }} size={30} />\n        )}\n      </button>\n    </>\n  );\n};\n\nconst TagToggleButton = (props) => {\n  const [showTags, setShowTags] = useState(false);\n\n  const tagToggle = () => {\n    setShowTags(!showTags);\n  };\n\n  return (\n    <>\n      <button\n        class=\"btn\"\n        data-toggle=\"collapse\"\n        data-target={\n          \"#collapse\" + props.tagIndex.toString() + props.todo._id.toString()\n        }\n        onClick={() => tagToggle()}\n      >\n        {showTags ? (\n          <FaChevronCircleUp style={{ color: \"#292b2c\" }} size={30} />\n        ) : (\n          <FaChevronCircleDown style={{ color: \"#292b2c\" }} size={30} />\n        )}\n      </button>\n    </>\n  );\n};\n\nconst TagForm = (props) => {\n  const [tag, setTag] = useState(\"\");\n  const [autoTags, setAutoTags] = useState([]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    let tags = props.todo.tags;\n    if (!tags.includes(tag)) {\n      tags.push(tag);\n    }\n    axios\n      .post(`${url}/todos/update/${props.todo._id}`, {\n        task: props.todo.task,\n        username: props.todo.username,\n        due: props.todo.due,\n        complete: props.todo.complete,\n        tags: tags,\n      })\n      .then((res) => console.log(res));\n    setTag(\"\");\n    $(\"#modal\" + props.index).modal(\"hide\");\n  };\n\n  const handleChange = (e) => {\n    e.target.value.length\n      ? setAutoTags(\n          props.globalTags.filter((tagName) =>\n            tagName.toLowerCase().startsWith(e.target.value.toLowerCase())\n          )\n        )\n      : setAutoTags([]);\n    setTag(\n      e.target.value\n        .toLowerCase()\n        .split(\" \")\n        .map((s) => s.charAt(0).toUpperCase() + s.substring(1))\n        .join(\" \")\n    );\n  };\n\n  const handleClickTagAdd = (divTag) => {\n    let tags = props.todo.tags;\n    if (!tags.includes(divTag)) {\n      tags.push(divTag);\n    }\n    axios\n      .post(`${url}/todos/update/${props.todo._id}`, {\n        task: props.todo.task,\n        username: props.todo.username,\n        due: props.todo.due,\n        complete: props.todo.complete,\n        tags: tags,\n      })\n      .then((res) => console.log(res));\n  };\n\n  return (\n    <>\n      <form\n        className=\"w-100 justify-content-center px-2\"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"row\">\n          <p\n            className=\"my-auto col-4\"\n            style={{\n              fontSize: \"1em\",\n              color: props.user.color,\n              fontWeight: \"bold\",\n            }}\n          >\n            Add Tag:\n          </p>\n          <div class=\"wrapper my-auto col-6\">\n            <input\n              class=\"px-2\"\n              placeholder=\"Start Typing\"\n              value={tag}\n              onChange={handleChange}\n            />\n            <div class=\"mobile-tags-dropdown px-2\">\n              {autoTags.map((tag) => (\n                <div\n                  className=\"dropdown-tag m-1\"\n                  key={tag}\n                  onClick={() => handleClickTagAdd(tag)}\n                >\n                  {tag}\n                </div>\n              ))}\n            </div>\n          </div>\n          <div class=\"col-1\">\n            <button class=\"btn\" type=\"submit\">\n              <FaPlusCircle size={25} style={{ color: props.user.color }} />\n            </button>\n          </div>\n        </div>\n      </form>\n    </>\n  );\n};\n\nconst TodoForm = ({ user }) => {\n  const [task, setTask] = useState(\"\");\n\n  const handleChange = (e) => {\n    setTask(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    axios\n      .post(`${url}/todos/add`, {\n        task,\n        username: user.username,\n      })\n      .then((res) => console.log(res));\n    setTask(\"\");\n  };\n\n  return (\n    <div className=\"container-fluid m-0 mw-100\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-12 col-md-6\">\n          <form onSubmit={handleSubmit}>\n            <input\n              className=\"w-100 border border-dark rounded p-2 text-center\"\n              value={task}\n              onChange={handleChange}\n              placeholder=\"New Task\"\n            />\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Todo = ({ user, todo, globalTags, removeTask }) => {\n  const markComplete = (todo) => {\n    axios\n      .post(`${url}/todos/update/${todo._id}`, {\n        task: todo.task,\n        username: todo.username,\n        due: todo.due,\n        tags: todo.tags,\n        complete: !todo.complete,\n      })\n      .then((res) => console.log(res));\n  };\n\n  const removeTag = (todo, tag) => {\n    axios\n      .post(`${url}/todos/update/${todo._id}`, {\n        task: todo.task,\n        username: todo.username,\n        due: todo.due,\n        complete: todo.complete,\n        tags: todo.tags.filter((item) => item !== tag),\n      })\n      .then((res) => console.log(res));\n  };\n\n  return (\n    <>\n      <div\n        className=\"row justify-content-center p-2 todo-mobile\"\n        key={todo._id}\n      >\n        <div className=\"col-2 text-center my-auto mx-0 px-0\">\n          <CompleteButton user={user} todo={todo} markComplete={markComplete} />\n        </div>\n        <div className={`${todo.complete ? \"complete\" : \"\"} col-7 my-auto`}>\n          {todo.task}\n        </div>\n        <div className=\"col-2 text-center\">\n          <ToggleButton user={user} todo={todo} />\n        </div>\n      </div>\n      <div className=\"w-100 collapse container-fluid px-1 my-3 pb-3 todo-drop-mobile\" id={\"collapse\" + todo._id.toString()}>\n        <div className=\"row mx-2 my-2\">\n          {todo.tags.map((tag) => (\n            <div\n              key={tag}\n              className=\"tag p-2 m-1\"\n              style={{\n                color: user.color,\n                border: `1px solid ${user.color}`,\n              }}\n            >\n              {`${tag}  `}\n              <span\n                className=\"pointer rotate\"\n                onClick={() => removeTag(todo, tag)}\n              >\n                +\n              </span>\n            </div>\n          ))}\n        </div>\n        <div className=\"row mx-2 my-2\">\n          <TagForm\n            todo={todo}\n            user={user}\n            globalTags={globalTags}\n          />\n        </div>\n        <div\n          className=\"row mx-2 my-2 p-2 border\"\n        >\n          <div className=\"col-4 pl-0 text-left\">\n            <p\n              className=\"my-auto\"\n              style={{ fontWeight: \"bold\", color: user.color }}\n            >\n              Due Date:\n            </p>\n          </div>\n          <div className=\"col-4 border pl-0\">\n            <DateButton user={user} todo={todo} />\n          </div>\n        </div>\n        <div className=\"row mx-2 my-2\">\n          <button\n            style={{\n              color: \"white\",\n              backgroundColor: user.color,\n              borderRadius: 10,\n            }}\n            class=\"btn\"\n            onClick={() => removeTask(todo._id)}\n          >\n            Delete Task <FaRegTrashAlt />\n          </button>\n        </div>\n      </div>\n      </>\n  );\n};\n\nconst TodoList = (props) => {\n  const [todos, setTodos] = useState([]);\n  const [globalTags, setGlobalTags] = useState();\n  const [tagLists, setTagLists] = useState([]);\n\n  const refreshTodos = () => {\n    axios.get(`${url}/todos/`).then((res) => {\n      setTodos(\n        res.data.filter((todo) => todo.username === props.user.username)\n      );\n    });\n  };\n\n  const refreshGlobalTags = () => {\n    let tempTags = [];\n    for (let i = 0; i < todos.length; i++) {\n      for (let j = 0; j < todos[i].tags.length; j++) {\n        if (!tempTags.includes(todos[i].tags[j])) {\n          tempTags.push(todos[i].tags[j]);\n        }\n      }\n    }\n    setGlobalTags(tempTags);\n  };\n\n  const refreshTagLists = () => {\n    if (todos.length && globalTags.length) {\n      let tagArray = [];\n      for (let i = 0; i < globalTags.length; i++) {\n        let tagObject = {\n          name: globalTags[i],\n          list: [],\n        };\n        let tagList = [];\n        for (let j = 0; j < todos.length; j++) {\n          if (todos[j].tags.includes(globalTags[i])) {\n            tagList.push(todos[j]);\n          }\n        }\n        tagObject.list = tagList;\n        tagArray.push(tagObject);\n      }\n      setTagLists(tagArray);\n    }\n  };\n\n  useEffect(() => {\n    refreshGlobalTags();\n  }, [todos]);\n\n  useEffect(() => {\n    refreshTodos();\n  }, [todos]);\n\n  useEffect(() => {\n    refreshTagLists();\n  }, [todos]);\n\n  const removeTask = (id) => {\n    axios.delete(`${url}/todos/${id}`).then((res) => console.log(res));\n    $(\".collapse\").collapse(\"hide\");\n  };\n\n  if (props.isInbox) {\n    return (\n      <>\n        <TodoForm user={props.user} />\n        <div className=\"container-fluid mt-3 px-0\">\n          {todos.map((todo) => (\n            <Todo\n              todo={todo}\n              user={props.user}\n              removeTask={removeTask}\n              globalTags={globalTags}\n            />\n          ))}\n        </div>\n      </>\n    );\n  } else {\n    return (\n      <div className=\"container mt-1 px-0\">\n        {tagLists.map((tag, index) => {\n          let tagIndex = index;\n          for (let i = 0; i < tag.list.length; i++) {\n            tag.list[i].tagIndex = tagIndex;\n          }\n\n          return (\n            <div className=\"container my-5 px-0\">\n              <h2 style={{ color: props.user.color }} className=\"mx-3\">{tag.name}</h2>\n              <>\n                {tag.list.map((todo) => (\n                  <Todo\n                  todo={todo}\n                  user={props.user}\n                  removeTask={removeTask}\n                  globalTags={globalTags}\n                />\n                ))}\n              </>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n};\n\nexport default TodoList;\n"]},"metadata":{},"sourceType":"module"}