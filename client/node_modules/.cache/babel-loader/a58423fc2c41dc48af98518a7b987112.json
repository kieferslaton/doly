{"ast":null,"code":"var _jsxFileName = \"/Users/kieferslaton/doly-mern/src/components/TodoListMobile.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { FaRegCircle, FaRegCheckCircle, FaRegTimesCircle } from \"react-icons/fa\";\n\nconst DeleteButton = props => {\n  const [hover, setHover] = useState(false);\n\n  const hoverToggle = () => {\n    setHover(!hover);\n  };\n\n  return /*#__PURE__*/React.createElement(FaRegTimesCircle, {\n    size: 30,\n    onMouseEnter: () => hoverToggle(),\n    onMouseLeave: () => hoverToggle(),\n    style: {\n      color: hover ? props.user.color : \"black\",\n      cursor: hover ? \"pointer\" : \"default\"\n    },\n    onClick: () => props.removeTask(props.todo._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 5\n    }\n  });\n};\n\nconst CompleteButton = props => {\n  const [hover, setHover] = useState(false);\n\n  const hoverToggle = () => {\n    setHover(!hover);\n  };\n\n  const handleClick = () => {\n    props.markComplete(props.todo);\n    setHover(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FaRegCircle, {\n    size: 30,\n    onMouseEnter: () => hoverToggle(),\n    onMouseLeave: () => hoverToggle(),\n    style: {\n      color: hover ? props.user.color : \"black\",\n      cursor: hover ? \"pointer\" : \"default\"\n    },\n    className: props.todo.complete ? \"d-none\" : \"\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FaRegCheckCircle, {\n    size: 30,\n    onMouseEnter: () => hoverToggle(),\n    onMouseLeave: () => hoverToggle(),\n    style: {\n      color: hover ? props.user.color : \"black\",\n      cursor: hover ? \"pointer\" : \"default\"\n    },\n    className: props.todo.complete ? \"\" : \"d-none\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst TagToggleButton = props => {\n  const [showTags, setShowTags] = useState(false);\n\n  const tagToggle = () => {\n    setShowTags(!showTags);\n  };\n\n  return /*#__PURE__*/React.createElement(\"button\", {\n    class: \"btn\",\n    style: {\n      fontSize: \"0.8em\",\n      color: showTags ? \"white\" : props.user.color,\n      backgroundColor: showTags ? props.user.color : \"\",\n      border: `1px solid ${props.user.color}`,\n      borderRadius: 10\n    },\n    \"data-toggle\": \"collapse\",\n    \"data-target\": \"#collapse\" + props.index.toString(),\n    onClick: () => tagToggle(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, showTags ? \"Hide Tags\" : \"Show Tags\");\n};\n\nconst TagForm = props => {\n  const [tag, setTag] = useState(\"\");\n  const [autoTags, setAutoTags] = useState([]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let tags = props.todo.tags;\n\n    if (!tags.includes(tag)) {\n      tags.push(tag);\n    }\n\n    axios.post(`http://localhost:5000/todos/update/${props.todo._id}`, {\n      task: props.todo.task,\n      username: props.todo.username,\n      due: props.todo.due,\n      complete: props.todo.complete,\n      tags: tags\n    }).then(res => console.log(res));\n    setTag(\"\");\n  };\n\n  const handleChange = e => {\n    e.target.value.length ? setAutoTags(props.globalTags.filter(tagName => tagName.toLowerCase().startsWith(e.target.value.toLowerCase()))) : setAutoTags([]);\n    setTag(e.target.value.toLowerCase().split(\" \").map(s => s.charAt(0).toUpperCase() + s.substring(1)).join(\" \"));\n  };\n\n  const handleClickTagAdd = divTag => {\n    let tags = props.todo.tags;\n\n    if (!tags.includes(divTag)) {\n      tags.push(divTag);\n    }\n\n    axios.post(`http://localhost:5000/todos/update/${props.todo._id}`, {\n      task: props.todo.task,\n      username: props.todo.username,\n      due: props.todo.due,\n      complete: props.todo.complete,\n      tags: tags\n    }).then(res => console.log(res));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn tag-btn p-2 m-1 dropdown-toggle\",\n    style: {\n      color: props.user.color,\n      border: `1px solid ${props.user.color}`\n    },\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#modal\" + props.index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, \"Add Tag +\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade p-2\",\n    id: \"modal\" + props.index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"modal-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, \"Add Tag\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"close\",\n    \"data-dismiss\": \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 68\n    }\n  }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    style: {\n      border: `1px solid ${props.user.color}`\n    },\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Add Tag\",\n    value: tag,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }), autoTags.map(tag => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown-tag\",\n    key: tag,\n    onClick: () => handleClickTagAdd(tag),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, tag)))))));\n};\n\nconst TodoList = props => {\n  const [todos, setTodos] = useState([]);\n  const [task, setTask] = useState(\"\");\n  const [globalTags, setGlobalTags] = useState();\n  const [tagLists, setTagLists] = useState([]);\n\n  const refreshTodos = () => {\n    axios.get(`http://localhost:5000/todos/`).then(res => {\n      setTodos(res.data.filter(todo => todo.username === props.user.username));\n    });\n  };\n\n  const refreshGlobalTags = () => {\n    let tempTags = [];\n\n    for (let i = 0; i < todos.length; i++) {\n      for (let j = 0; j < todos[i].tags.length; j++) {\n        if (!tempTags.includes(todos[i].tags[j])) {\n          tempTags.push(todos[i].tags[j]);\n        }\n      }\n    }\n\n    setGlobalTags(tempTags);\n  };\n\n  const refreshTagLists = () => {\n    if (todos.length && globalTags.length) {\n      let tagArray = [];\n\n      for (let i = 0; i < globalTags.length; i++) {\n        let tagObject = {\n          name: globalTags[i],\n          list: []\n        };\n        let tagList = [];\n\n        for (let j = 0; j < todos.length; j++) {\n          if (todos[j].tags.includes(globalTags[i])) {\n            tagList.push(todos[j]);\n          }\n        }\n\n        tagObject.list = tagList;\n        tagArray.push(tagObject);\n      }\n\n      setTagLists(tagArray);\n    }\n  };\n\n  useEffect(() => {\n    refreshGlobalTags();\n  }, [todos]);\n  useEffect(() => {\n    refreshTodos();\n  }, [todos]);\n  useEffect(() => {\n    refreshTagLists();\n  }, [todos]);\n\n  const handleChange = e => {\n    setTask(e.target.value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axios.post(\"http://localhost:5000/todos/add\", {\n      task,\n      username: props.user.username\n    }).then(res => console.log(res));\n    setTask(\"\");\n  };\n\n  const markComplete = todo => {\n    axios.post(`http://localhost:5000/todos/update/${todo._id}`, {\n      task: todo.task,\n      username: todo.username,\n      due: todo.due,\n      tags: todo.tags,\n      complete: !todo.complete\n    }).then(res => console.log(res));\n  };\n\n  const removeTask = id => {\n    axios.delete(`http://localhost:5000/todos/${id}`).then(res => console.log(res));\n  };\n\n  const removeTag = (todo, tag) => {\n    axios.post(`http://localhost:5000/todos/update/${todo._id}`, {\n      task: todo.task,\n      username: todo.username,\n      due: todo.due,\n      complete: todo.complete,\n      tags: todo.tags.filter(item => item !== tag)\n    }).then(res => console.log(res));\n  };\n\n  if (props.isInbox) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid m-0 mw-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"w-100 border border-dark rounded p-2 text-center\",\n      value: task,\n      onChange: handleChange,\n      placeholder: \"New Task\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid m-0 mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }\n    }, todos.map((todo, index) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center py-2 todo-mobile\",\n      key: todo._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1 text-center my-auto mx-0 px-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CompleteButton, {\n      user: props.user,\n      todo: todo,\n      markComplete: markComplete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: `${todo.complete ? \"complete\" : \"\"} col-5 my-auto`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 17\n      }\n    }, todo.task), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TagToggleButton, {\n      index: index,\n      user: props.user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1 my-auto text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(DeleteButton, {\n      user: props.user,\n      todo: todo,\n      removeTask: removeTask,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center collapse\",\n      id: \"collapse\" + index.toString(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 15\n      }\n    }, todo.tags.map(tag => /*#__PURE__*/React.createElement(\"div\", {\n      key: tag,\n      className: \"tag p-2 m-1\",\n      style: {\n        color: props.user.color,\n        border: `1px solid ${props.user.color}`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 19\n      }\n    }, `${tag}  `, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"pointer rotate\",\n      onClick: () => removeTag(todo, tag),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 21\n      }\n    }, \"+\"))), /*#__PURE__*/React.createElement(TagForm, {\n      todo: todo,\n      index: index,\n      user: props.user,\n      globalTags: globalTags,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 17\n      }\n    }))))));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mt-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 7\n      }\n    }, tagLists.map(tag => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container my-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        color: props.user.color\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 13\n      }\n    }, tag.name), /*#__PURE__*/React.createElement(React.Fragment, null, tag.list.map(todo => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center py-2 todo\",\n      key: todo._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1 my-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(CompleteButton, {\n      user: props.user,\n      todo: todo,\n      markComplete: markComplete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: `${todo.complete ? \"complete\" : \"\"} col-4 my-auto`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 19\n      }\n    }, todo.task), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 19\n      }\n    }, todo.tags.map(tag => /*#__PURE__*/React.createElement(\"div\", {\n      key: tag,\n      className: \"tag p-2 m-1\",\n      style: {\n        color: props.user.color,\n        border: `1px solid ${props.user.color}`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 23\n      }\n    }, `${tag}  `, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"pointer rotate\",\n      onClick: () => removeTag(todo, tag),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 25\n      }\n    }, \"+\"))), /*#__PURE__*/React.createElement(TagForm, {\n      todo: todo,\n      user: props.user,\n      globalTags: globalTags,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1 my-auto text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(DeleteButton, {\n      user: props.user,\n      todo: todo,\n      removeTask: removeTask,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 21\n      }\n    }))))))));\n  }\n};\n\nexport default TodoList;","map":{"version":3,"sources":["/Users/kieferslaton/doly-mern/src/components/TodoListMobile.js"],"names":["React","useState","useEffect","axios","FaRegCircle","FaRegCheckCircle","FaRegTimesCircle","DeleteButton","props","hover","setHover","hoverToggle","color","user","cursor","removeTask","todo","_id","CompleteButton","handleClick","markComplete","complete","TagToggleButton","showTags","setShowTags","tagToggle","fontSize","backgroundColor","border","borderRadius","index","toString","TagForm","tag","setTag","autoTags","setAutoTags","handleSubmit","e","preventDefault","tags","includes","push","post","task","username","due","then","res","console","log","handleChange","target","value","length","globalTags","filter","tagName","toLowerCase","startsWith","split","map","s","charAt","toUpperCase","substring","join","handleClickTagAdd","divTag","TodoList","todos","setTodos","setTask","setGlobalTags","tagLists","setTagLists","refreshTodos","get","data","refreshGlobalTags","tempTags","i","j","refreshTagLists","tagArray","tagObject","name","list","tagList","id","delete","removeTag","item","isInbox"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  FaRegCircle,\n  FaRegCheckCircle,\n  FaRegTimesCircle,\n} from \"react-icons/fa\";\n\nconst DeleteButton = (props) => {\n  const [hover, setHover] = useState(false);\n\n  const hoverToggle = () => {\n    setHover(!hover);\n  };\n\n  return (\n    <FaRegTimesCircle\n      size={30}\n      onMouseEnter={() => hoverToggle()}\n      onMouseLeave={() => hoverToggle()}\n      style={{\n        color: hover ? props.user.color : \"black\",\n        cursor: hover ? \"pointer\" : \"default\",\n      }}\n      onClick={() => props.removeTask(props.todo._id)}\n    />\n  );\n};\n\nconst CompleteButton = (props) => {\n  const [hover, setHover] = useState(false);\n\n  const hoverToggle = () => {\n    setHover(!hover);\n  };\n\n  const handleClick = () => {\n    props.markComplete(props.todo);\n    setHover(false);\n  };\n\n  return (\n    <>\n      <FaRegCircle\n        size={30}\n        onMouseEnter={() => hoverToggle()}\n        onMouseLeave={() => hoverToggle()}\n        style={{\n          color: hover ? props.user.color : \"black\",\n          cursor: hover ? \"pointer\" : \"default\",\n        }}\n        className={props.todo.complete ? \"d-none\" : \"\"}\n        onClick={handleClick}\n      />\n      <FaRegCheckCircle\n        size={30}\n        onMouseEnter={() => hoverToggle()}\n        onMouseLeave={() => hoverToggle()}\n        style={{\n          color: hover ? props.user.color : \"black\",\n          cursor: hover ? \"pointer\" : \"default\",\n        }}\n        className={props.todo.complete ? \"\" : \"d-none\"}\n        onClick={handleClick}\n      />\n    </>\n  );\n};\n\nconst TagToggleButton = (props) => {\n  const [showTags, setShowTags] = useState(false);\n\n  const tagToggle = () => {\n    setShowTags(!showTags)\n  }\n\n  return(\n    <button\n                    class=\"btn\"\n                    style={{\n                      fontSize: \"0.8em\",\n                      color: showTags ? \"white\" : props.user.color,\n                      backgroundColor: showTags ? props.user.color : \"\",\n                      border: `1px solid ${props.user.color}`,\n                      borderRadius: 10,\n                    }}\n                    data-toggle=\"collapse\"\n                    data-target={\"#collapse\" + props.index.toString()}\n                    onClick={() => tagToggle()}\n                  >\n                    {showTags ? \"Hide Tags\" : \"Show Tags\"}\n                  </button>\n\n  )\n}\n\nconst TagForm = (props) => {\n  const [tag, setTag] = useState(\"\");\n  const [autoTags, setAutoTags] = useState([]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    let tags = props.todo.tags;\n    if (!tags.includes(tag)) {\n      tags.push(tag);\n    }\n    axios\n      .post(`http://localhost:5000/todos/update/${props.todo._id}`, {\n        task: props.todo.task,\n        username: props.todo.username,\n        due: props.todo.due,\n        complete: props.todo.complete,\n        tags: tags,\n      })\n      .then((res) => console.log(res));\n    setTag(\"\");\n  };\n\n  const handleChange = (e) => {\n    e.target.value.length\n      ? setAutoTags(\n          props.globalTags.filter((tagName) =>\n            tagName.toLowerCase().startsWith(e.target.value.toLowerCase())\n          )\n        )\n      : setAutoTags([]);\n    setTag(\n      e.target.value\n        .toLowerCase()\n        .split(\" \")\n        .map((s) => s.charAt(0).toUpperCase() + s.substring(1))\n        .join(\" \")\n    );\n  };\n\n  const handleClickTagAdd = (divTag) => {\n    let tags = props.todo.tags;\n    if (!tags.includes(divTag)) {\n      tags.push(divTag);\n    }\n    axios\n      .post(`http://localhost:5000/todos/update/${props.todo._id}`, {\n        task: props.todo.task,\n        username: props.todo.username,\n        due: props.todo.due,\n        complete: props.todo.complete,\n        tags: tags,\n      })\n      .then((res) => console.log(res));\n  };\n\n  return (\n    <div className=\"dropdown\">\n      <button\n        className=\"btn tag-btn p-2 m-1 dropdown-toggle\"\n        style={{\n          color: props.user.color,\n          border: `1px solid ${props.user.color}`,\n        }}\n        data-toggle=\"modal\"\n        data-target={\"#modal\"+props.index}\n      >\n        Add Tag +\n      </button>\n      <div className=\"modal fade p-2\"\n        id={\"modal\"+props.index}>\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\">Add Tag</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\"><span>&times;</span></button>\n        </div>\n        <div class=\"modal-body\">\n      <form\n        style={{ border: `1px solid ${props.user.color}` }}\n        onSubmit={handleSubmit}\n      >\n        <input placeholder=\"Add Tag\" value={tag} onChange={handleChange} />\n        {autoTags.map((tag) => (\n          <div\n            className=\"dropdown-tag\"\n            key={tag}\n            onClick={() => handleClickTagAdd(tag)}\n          >\n            {tag}\n          </div>\n        ))}\n      </form>\n      </div>\n      </div>\n      </div>\n    </div>\n  );\n};\n\nconst TodoList = (props) => {\n  const [todos, setTodos] = useState([]);\n  const [task, setTask] = useState(\"\");\n  const [globalTags, setGlobalTags] = useState();\n  const [tagLists, setTagLists] = useState([]);\n\n  const refreshTodos = () => {\n    axios.get(`http://localhost:5000/todos/`).then((res) => {\n      setTodos(\n        res.data.filter((todo) => todo.username === props.user.username)\n      );\n    });\n  };\n\n  const refreshGlobalTags = () => {\n    let tempTags = [];\n    for (let i = 0; i < todos.length; i++) {\n      for (let j = 0; j < todos[i].tags.length; j++) {\n        if (!tempTags.includes(todos[i].tags[j])) {\n          tempTags.push(todos[i].tags[j]);\n        }\n      }\n    }\n    setGlobalTags(tempTags);\n  };\n\n  const refreshTagLists = () => {\n    if (todos.length && globalTags.length) {\n      let tagArray = [];\n      for (let i = 0; i < globalTags.length; i++) {\n        let tagObject = {\n          name: globalTags[i],\n          list: [],\n        };\n        let tagList = [];\n        for (let j = 0; j < todos.length; j++) {\n          if (todos[j].tags.includes(globalTags[i])) {\n            tagList.push(todos[j]);\n          }\n        }\n        tagObject.list = tagList;\n        tagArray.push(tagObject);\n      }\n      setTagLists(tagArray);\n    }\n  };\n\n  useEffect(() => {\n    refreshGlobalTags();\n  }, [todos]);\n\n  useEffect(() => {\n    refreshTodos();\n  }, [todos]);\n\n  useEffect(() => {\n    refreshTagLists();\n  }, [todos]);\n\n  const handleChange = (e) => {\n    setTask(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    axios\n      .post(\"http://localhost:5000/todos/add\", {\n        task,\n        username: props.user.username,\n      })\n      .then((res) => console.log(res));\n    setTask(\"\");\n  };\n\n  const markComplete = (todo) => {\n    axios\n      .post(`http://localhost:5000/todos/update/${todo._id}`, {\n        task: todo.task,\n        username: todo.username,\n        due: todo.due,\n        tags: todo.tags,\n        complete: !todo.complete,\n      })\n      .then((res) => console.log(res));\n  };\n\n  const removeTask = (id) => {\n    axios\n      .delete(`http://localhost:5000/todos/${id}`)\n      .then((res) => console.log(res));\n  };\n\n  const removeTag = (todo, tag) => {\n    axios\n      .post(`http://localhost:5000/todos/update/${todo._id}`, {\n        task: todo.task,\n        username: todo.username,\n        due: todo.due,\n        complete: todo.complete,\n        tags: todo.tags.filter((item) => item !== tag),\n      })\n      .then((res) => console.log(res));\n  };\n\n  if (props.isInbox) {\n    return (\n      <>\n        <div className=\"container-fluid m-0 mw-100\">\n          <div className=\"row justify-content-center\">\n            <div className=\"col-12 col-md-6\">\n              <form onSubmit={handleSubmit}>\n                <input\n                  className=\"w-100 border border-dark rounded p-2 text-center\"\n                  value={task}\n                  onChange={handleChange}\n                  placeholder=\"New Task\"\n                />\n              </form>\n            </div>\n          </div>\n        </div>\n        <div className=\"container-fluid m-0 mt-4\">\n          {todos.map((todo, index) => (\n            <>\n              <div\n                className=\"row justify-content-center py-2 todo-mobile\"\n                key={todo._id}\n              >\n                <div className=\"col-1 text-center my-auto mx-0 px-0\">\n                  <CompleteButton\n                    user={props.user}\n                    todo={todo}\n                    markComplete={markComplete}\n                  />\n                </div>\n                <div\n                  className={`${todo.complete ? \"complete\" : \"\"} col-5 my-auto`}\n                >\n                  {todo.task}\n                </div>\n                <div className=\"col-4 text-center\">\n                  <TagToggleButton index={index} user={props.user} />\n                </div>\n                <div className=\"col-1 my-auto text-right\">\n                  <DeleteButton\n                    user={props.user}\n                    todo={todo}\n                    removeTask={removeTask}\n                  />\n                </div>\n              </div>\n              <div\n                className=\"row justify-content-center collapse\"\n                id={\"collapse\" + index.toString()}\n              >\n                {todo.tags.map((tag) => (\n                  <div\n                    key={tag}\n                    className=\"tag p-2 m-1\"\n                    style={{\n                      color: props.user.color,\n                      border: `1px solid ${props.user.color}`,\n                    }}\n                  >\n                    {`${tag}  `}\n                    <span\n                      className=\"pointer rotate\"\n                      onClick={() => removeTag(todo, tag)}\n                    >\n                      +\n                    </span>\n                  </div>\n                ))}\n                <TagForm\n                  todo={todo}\n                  index={index}\n                  user={props.user}\n                  globalTags={globalTags}\n                />\n              </div>\n            </>\n          ))}\n        </div>\n      </>\n    );\n  } else {\n    return (\n      <div className=\"container mt-1\">\n        {tagLists.map((tag) => (\n          <div className=\"container my-5\">\n            <h2 style={{ color: props.user.color }}>{tag.name}</h2>\n            <>\n              {tag.list.map((todo) => (\n                <div\n                  className=\"row justify-content-center py-2 todo\"\n                  key={todo._id}\n                >\n                  <div className=\"col-1 my-auto\">\n                    <CompleteButton\n                      user={props.user}\n                      todo={todo}\n                      markComplete={markComplete}\n                    />\n                  </div>\n                  <div\n                    className={`${\n                      todo.complete ? \"complete\" : \"\"\n                    } col-4 my-auto`}\n                  >\n                    {todo.task}\n                  </div>\n                  <div className=\"col-6\">\n                    {todo.tags.map((tag) => (\n                      <div\n                        key={tag}\n                        className=\"tag p-2 m-1\"\n                        style={{\n                          color: props.user.color,\n                          border: `1px solid ${props.user.color}`,\n                        }}\n                      >\n                        {`${tag}  `}\n                        <span\n                          className=\"pointer rotate\"\n                          onClick={() => removeTag(todo, tag)}\n                        >\n                          +\n                        </span>\n                      </div>\n                    ))}\n                    <TagForm\n                      todo={todo}\n                      user={props.user}\n                      globalTags={globalTags}\n                    />\n                  </div>\n                  <div className=\"col-1 my-auto text-right\">\n                    <DeleteButton\n                      user={props.user}\n                      todo={todo}\n                      removeTask={removeTask}\n                    />\n                  </div>\n                </div>\n              ))}\n            </>\n          </div>\n        ))}\n      </div>\n    );\n  }\n};\n\nexport default TodoList;\n"]},"metadata":{},"sourceType":"module"}